<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Ocal_XH – User Manual</title>
  <style type="text/css">
    body {
        font-family: Georgia, serif;
        line-height: 1.5;
        margin-left: auto;
        margin-right: auto;
        padding-left: 0.5em;
        padding-right: 0.5em;
        background: #ffffe1;
        max-width: 32em;
    }
    p {
        text-align: justify;
    }
    pre {
        color: black;
        background: #ffe;
        overflow: auto;
        padding: 0.2em 0.5em;
        border: 1px solid silver;
    }
  </style>
</head>
<body>
<h1 id="ocal_xh">Ocal_XH</h1>
<p>Ocal_XH facilitates to present calendars on your website which display the occupancy of a certain location or other rental, so visitors can easily see whether the item is available on a certain date or (hourly) interval. Each calendar is only meant for a single rental; however, you can display multiple calendars on a single page. Visitors are able to switch between a calendar and a list view.</p>
<p>The plugin does neither provide any actual booking facilities (however, you may be able to combine it with a mail form like <a href="https://github.com/cmb69/advancedform_xh">Advancedform_XH</a>), nor can it be used as an event calendar, such as <a href="https://github.com/cmb69/calendar_xh">Calendar_XH</a>.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#download">Download</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#settings">Settings</a></li>
<li><a href="#usage">Usage</a>
<ul>
<li><a href="#administration">Administration</a></li>
<li><a href="#states">States</a></li>
</ul></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#license">License</a></li>
<li><a href="#credits">Credits</a></li>
</ul>
<h2 id="requirements">Requirements</h2>
<p>Ocal_XH is a plugin for <a href="https://cmsimple-xh.org/">CMSimple_XH</a>. It requires CMSimple_XH ≥ 1.7.0, and PHP ≥ 7.1.0. Ocal_XH also requires <a href="https://github.com/cmb69/plib_xh">Plib_XH</a> ≥ 1.6; if that is not already installed (see <code>Settings</code> → <code>Info</code>), get the <a href="https://github.com/cmb69/plib_xh/releases/latest">lastest release</a>, and install it.</p>
<h2 id="download">Download</h2>
<p>The <a href="https://github.com/cmb69/ocal_xh/releases/latest">lastest release</a> is available for download on Github.</p>
<h2 id="installation">Installation</h2>
<p>The installation is done as with many other CMSimple_XH plugins. See the <a href="https://wiki.cmsimple-xh.org/?for-users/working-with-the-cms/plugins#id3_install-plugin">CMSimple_XH Wiki</a> for further details.</p>
<ol type="1">
<li><strong>Backup the data on your server.</strong></li>
<li>Unzip the distribution on your computer.</li>
<li>Upload the whole directory <code>ocal/</code> to your server into the <code>plugins/</code> directory of CMSimple_XH.</li>
<li>Set write permissions for the subdirectories <code>css/</code>, <code>config/</code> and <code>languages/</code>.</li>
<li>Navigate <code>Plugins</code> → <code>Ocal</code> to check if all requirements are fulfilled.</li>
</ol>
<h2 id="settings">Settings</h2>
<p>The configuration of the plugin is done as with many other CMSimple_XH plugins in the back-end of the Website. Select <code>Plugins</code> → <code>Ocal</code>.</p>
<p>You can change the default settings of Ocal_XH under <code>Config</code>. Hints for the options will be displayed when hovering over the help icon with your mouse.</p>
<p>Localization is done under <code>Language</code>. You can translate the character strings to your own language (if there is no appropriate language file available), or customize them according to your needs.</p>
<p>The look of Ocal_XH can be customized under <code>Stylesheet</code>.</p>
<h2 id="usage">Usage</h2>
<p>To display a <em>daily</em> occupancy calendar on a <em>page</em>, use:</p>
<pre><code>{{{ocal(&#39;%OCCUPANCY_NAME%&#39;, %NUMBER_OF_MONTHS%)}}}</code></pre>
<p>To display an <em>hourly</em> occupancy calendar on a <em>page</em>, use:</p>
<pre><code>{{{ocal_hourly(&#39;%OCCUPANCY_NAME%&#39;, %NUMBER_OF_WEEKS%)}}}</code></pre>
<p>To display a <em>daily</em> occupancy calendar in the <em>template</em>, use:</p>
<pre><code>&lt;?=ocal(&#39;%OCCUPANCY_NAME%&#39;, %NUMBER_OF_MONTHS%)?&gt;</code></pre>
<p>To display an <em>hourly</em> occupancy calendar in the <em>template</em>, use:</p>
<pre><code>&lt;?=ocal_hourly(&#39;%OCCUPANCY_NAME%&#39;, %NUMBER_OF_WEEKS%)?&gt;</code></pre>
<p><code>%OCCUPANCY_NAME%</code> is an arbitrary name, that must only consist of the letters <code>a</code>-<code>z</code>, the digits <code>0</code>-<code>9</code> and hyphens (<code>-</code>). Daily and hourly occupancy calendars must <em>not</em> have the same name.</p>
<p><code>%NUMBER_OF_MONTHS%</code> and <code>%NUMBER_OF_WEEKS%</code> specify the number of calendars that shall be displayed simultaneously.</p>
<p>Note that you can put an arbitrary amount of occupancy calendars on a single page, even for the same occupancy (what might make sense if you like to present a large interval, say a year, on a page, and only a small interval, say a single month, in the template).</p>
<p>Some examples:</p>
<pre><code>{{{ocal(&#39;holiday-appartment&#39;, 12)}}}
&lt;?=ocal(&#39;holiday-appartment&#39;, 1)?&gt;
{{{ocal_hourly(&#39;rickshaw&#39;, 2)}}}
{{{ocal(&#39;rubber-raft-1&#39;, 6)}}}
{{{ocal(&#39;rubber-raft-2&#39;, 6)}}}</code></pre>
<h3 id="administration">Administration</h3>
<p>The administration of the occupancy calendars happens on the pages where they are displayed. When you are logged in as administrator, you will see a toolbar where you can pick one of the available states by clicking it. Then you can click individual dates in the displayed calendars to assign them this state. When you are finished, you have to save your modifications.</p>
<p>By default, four states are available which have the following meaning:</p>
<ul>
<li><code>0</code> (white): non applicable</li>
<li><code>1</code> (green): available</li>
<li><code>2</code> (yellow): reserved or partly available</li>
<li><code>3</code> (red): (fully) booked out</li>
</ul>
<p>Note that the number and meaning of the states <a href="#states">is customizable</a>.</p>
<p>Also note that the administration requires JavaScript and a somewhat contemporary browser (e.g. IE &lt; 8 is not supported).</p>
<h3 id="states">States</h3>
<p>It is possible to have an arbitrary amount of states, each with its own meaning. The maximum state that is available has to be set in the configuration (<code>State</code> → <code>Max</code>). Note that in addition to that many states, there is also state <code>0</code>, which is the default state that is not shown in the list views.</p>
<p>You can customize the state labels in the language settings of the plugin. If you have increased <code>State</code> → <code>Max</code>, you have to manually edit the respective language files in <code>plugins/ocal/languages/</code>, and have to add further state labels, like so:</p>
<pre><code>$plugin_tx[&#39;ocal&#39;][&#39;label_state_4&#39;]=&quot;extra state&quot;;</code></pre>
<p>You can customize the state colors in the stylesheet of the plugin, and add rules for additional states like so:</p>
<pre><code>*[data-ocal_state=&quot;4&quot;] {
    background: blue;
    color: white;
}</code></pre>
<p>To summarize: set the maximum state in the configuration, add (or remove) the state labels in the language file and add (or remove) state color rules in the stylesheet.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>Report bugs and ask for support either on <a href="https://github.com/cmb69/ocal_xh/issues">Github</a> or in the <a href="https://cmsimpleforum.com/">CMSimple_XH Forum</a>.</p>
<h2 id="license">License</h2>
<p>Ocal_XH is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>Ocal_XH is distributed in the hope that it will be useful, but <em>without any warranty</em>; without even the implied warranty of <em>merchantibility</em> or <em>fitness for a particular purpose</em>. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with Ocal_XH. If not, see <a href="https://www.gnu.org/licenses/" class="uri">https://www.gnu.org/licenses/</a>.</p>
<p>© 2014-2023 Christoph M. Becker</p>
<h2 id="credits">Credits</h2>
<p>Ocal_XH is inspired by the occcal plugin of CMSimple-Styles. Many thanks to Jens Broecher for having this nice idea.</p>
<p>The plugin icon is designed by <a href="https://www.deviantart.com/deviantdark">deviantdark</a>. Many thanks for publishing the icon under LGPL.</p>
<p>Many thanks to the community at the <a href="https://www.cmsimpleforum.com/">CMSimple_XH Forum</a> for tips, suggestions and testing. Especially I like to thank <em>rothom</em> for being the first tester and <em>hixi</em> for suggesting the hourly calendars. And many thanks to <em>lck</em> who found and reported serious bugs right after the release of version 1.0.</p>
<p>And last but not least many thanks to <a href="https://www.harteg.dk/">Peter Harteg</a>, the “father” of CMSimple, and all developers of <a href="https://www.cmsimple-xh.org/">CMSimple_XH</a> without whom this amazing CMS would not exist.</p>
</body>
</html>
